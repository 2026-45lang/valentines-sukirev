<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Language Galaxy</title>
    <style>
        body {
            background: radial-gradient(circle, #ffffff 0%, #dcdcdc 100%);
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            overflow: hidden; /* Lock the screen scroll */
            height: 100vh;
            width: 100vw;
            touch-action: none; /* Required for custom drag logic */
        }

        /* The viewport acts as the window */
        #viewport {
            width: 100%;
            height: 100%;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #viewport:active { cursor: grabbing; }

        /* This is the actual 'map' that moves when dragged */
        #panning-surface {
            position: absolute;
            width: 2000px; /* Large area to explore */
            height: 2000px;
            will-change: transform;
        }

        /* Central Tamil Bubble */
        #tamil-center {
            position: absolute;
            z-index: 10;
            width: 160px;
            height: 160px;
            border-radius: 50%;
            cursor: pointer;
            border: 5px solid #ff5722;
            box-shadow: 0 0 30px rgba(255, 87, 34, 0.4);
            object-fit: cover;
            /* Perfectly centered in the 2000px surface */
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.2s ease;
        }
        #tamil-center:hover { transform: translate(-50%, -50%) scale(1.05); }

        /* Other Language Bubbles */
        .bubble {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s ease;
            object-fit: cover;
            border: 2px solid white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .bubble:hover { transform: scale(1.2); z-index: 20; }
        .bubble:active { transform: scale(0.9); }
    </style>
</head>
<body>

    <div id="viewport">
        <div id="panning-surface">
            <img src="Images/457_Tamil.jpg" id="tamil-center" alt="Tamil" onclick="playAudio('Recordings/Tamil_intro.mp3')">
            <div id="bubble-field"></div>
        </div>
    </div>

    <script>
        const languages = [
            "Afrikaans", "Albanian", "Amharic", "Arabic", "Basque", "Bengali", 
            "Bosnian", "Bulgarian", "Cantonese", "Catalan", "Chinese", "Czech", 
            "Danish", "Dutch", "English", "Estonian", "Filipino", "Finnish", 
            "French", "Galician", "German", "Greek", "Gujarati", "Hausa", 
            "Hebrew", "Hindi", "Hungarian", "Icelandic", "Indonesian", "Italian", 
            "Japanese", "Javanese", "Kannada", "Khmer", "Korean", "Latin", 
            "Latvian", "Lithuanian", "Malay", "Malayalam", "Burmese", "Russian", 
            "Swedish", "Thai", "Turkish"
        ];

        const surface = document.getElementById('panning-surface');
        const field = document.getElementById('bubble-field');
        let currentAudio = null;

        // --- AUDIO LOGIC ---
        function playAudio(path) {
            if (currentAudio) { currentAudio.pause(); currentAudio.currentTime = 0; }
            currentAudio = new Audio(path);
            currentAudio.play();
        }

        // --- GENERATE BUBBLES ---
        languages.forEach((name, index) => {
            const id = index + 1;
            const img = document.createElement('img');
            img.src = `Images/${id}_${name}.jpg`; 
            const audioPath = `Recordings/${id}. ${name}.mp3`;
            img.className = 'bubble';
            
            const size = Math.floor(Math.random() * 40) + 80;
            img.style.width = size + 'px';
            img.style.height = size + 'px';

            // Distribute around the center (1000, 1000)
            const angle = Math.random() * Math.PI * 2;
            const distance = Math.floor(Math.random() * 400) + 200; 
            const x = 1000 + Math.cos(angle) * distance;
            const y = 1000 + Math.sin(angle) * distance;

            img.style.left = `${x - size/2}px`;
            img.style.top = `${y - size/2}px`;
            img.onclick = (e) => { e.stopPropagation(); playAudio(audioPath); };
            field.appendChild(img);
        });

        // --- DRAG / PAN LOGIC ---
        let isDragging = false;
        let startX, startY;
        let translateX = -500, translateY = -500; // Start centered

        // Apply initial position
        surface.style.transform = `translate(${translateX}px, ${translateY}px)`;

        const startDragging = (e) => {
            isDragging = true;
            startX = (e.pageX || e.touches[0].pageX) - translateX;
            startY = (e.pageY || e.touches[0].pageY) - translateY;
        };

        const stopDragging = () => { isDragging = false; };

        const move = (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const x = (e.pageX || e.touches[0].pageX);
            const y = (e.pageY || e.touches[0].pageY);
            translateX = x - startX;
            translateY = y - startY;
            surface.style.transform = `translate(${translateX}px, ${translateY}px)`;
        };

        const viewport = document.getElementById('viewport');
        viewport.addEventListener('mousedown', startDragging);
        viewport.addEventListener('touchstart', startDragging);
        window.addEventListener('mousemove', move);
        window.addEventListener('touchmove', move, { passive: false });
        window.addEventListener('mouseup', stopDragging);
        window.addEventListener('touchend', stopDragging);

    </script>
</body>
</html>