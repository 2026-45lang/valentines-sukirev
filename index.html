<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Language Galaxy</title>
    <style>
        body {
            background: radial-gradient(circle, #ffffff 0%, #dcdcdc 100%);
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            overflow: hidden; 
            height: 100vh;
            width: 100vw;
            touch-action: none;
        }

        #viewport {
            width: 100%;
            height: 100%;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        #viewport:active { cursor: grabbing; }

        #panning-surface {
            position: absolute;
            width: 3000px;
            height: 3000px;
            will-change: transform;
        }

        /* Central Tamil Bubble */
        #tamil-center {
            position: absolute;
            z-index: 10;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            cursor: pointer;
            border: 6px solid #ff5722;
            box-shadow: 0 0 40px rgba(255, 87, 34, 0.5);
            object-fit: cover;
            left: 1500px;
            top: 1500px;
            transform: translate(-50%, -50%);
            transition: transform 0.2s ease;
        }
        #tamil-center:hover { transform: translate(-50%, -50%) scale(1.1); }

        /* Other Language Bubbles */
        .bubble {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            object-fit: cover;
            border: 2px solid white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        .bubble:hover { transform: scale(1.3); z-index: 20; border-color: #03a9f4; }
        .bubble:active { transform: scale(0.9); }
    </style>
</head>
<body>

    <div id="viewport">
        <div id="panning-surface">
            <img src="Images/457_Tamil.jpg" id="tamil-center" alt="Tamil" onclick="playAudio('Recordings/Tamil_intro.mp3')">
            <div id="bubble-field"></div>
        </div>
    </div>

    <script>
        // List based on your folder screenshots
        const languages = [
            "Afrikaans", "Albanian", "Amharic", "Arabic", "Basque", "Bengali", 
            "Bosnian", "Bulgarian", "Cantonese", "Catalan", "Chinese", "Czech", 
            "Danish", "Dutch", "English", "Estonian", "Filipino", "Finnish", 
            "French", "Galician", "German", "Greek", "Gujarati", "Hausa", 
            "Hebrew", "Hindi", "Hungarian", "Icelandic", "Indonesian", "Italian", 
            "Japanese", "Javanese", "Kannada", "Khmer", "Korean", "Latin", 
            "Latvian", "Lithuanian", "Malay", "Malayalam", "Burmese", "Russian", 
            "Swedish", "Thai", "Turkish"
        ];

        const surface = document.getElementById('panning-surface');
        const field = document.getElementById('bubble-field');
        let currentAudio = null;

        function playAudio(path) {
            if (currentAudio) { currentAudio.pause(); currentAudio.currentTime = 0; }
            currentAudio = new Audio(path);
            currentAudio.play().catch(e => console.error("Audio failed:", e));
        }

        // --- BUBBLE GENERATION ---
        languages.forEach((name, index) => {
            const id = index + 1;
            const img = document.createElement('img');
            
            // Image naming: "1_Afrikaans.jpg"
            img.src = `Images/${id}_${name}.jpg`; 
            // Recording naming: "1. Afrikaans.mp3"
            const audioPath = `Recordings/${id}. ${name}.mp3`;
            
            img.className = 'bubble';
            
            // Randomized sizes
            const size = Math.floor(Math.random() * 40) + 90;
            img.style.width = size + 'px';
            img.style.height = size + 'px';

            // Galaxy orbit distribution logic
            const angle = Math.random() * Math.PI * 2;
            const distance = Math.floor(Math.random() * 700) + 250; 
            
            const x = 1500 + Math.cos(angle) * distance;
            const y = 1500 + Math.sin(angle) * distance;

            img.style.left = `${x - size/2}px`;
            img.style.top = `${y - size/2}px`;
            
            img.onclick = (e) => { 
                e.stopPropagation(); 
                playAudio(audioPath); 
            };
            field.appendChild(img);
        });

        // --- DRAG / PANNING LOGIC ---
        let isDragging = false;
        let startX, startY;
        
        // Offset to start centered on Tamil
        let translateX = -(1500 - window.innerWidth / 2);
        let translateY = -(1500 - window.innerHeight / 2);

        surface.style.transform = `translate(${translateX}px, ${translateY}px)`;

        const onStart = (e) => {
            isDragging = true;
            const clientX = e.pageX || (e.touches ? e.touches[0].pageX : 0);
            const clientY = e.pageY || (e.touches ? e.touches[0].pageY : 0);
            startX = clientX - translateX;
            startY = clientY - translateY;
        };

        const onMove = (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const clientX = e.pageX || (e.touches ? e.touches[0].pageX : 0);
            const clientY = e.pageY || (e.touches ? e.touches[0].pageY : 0);
            translateX = clientX - startX;
            translateY = clientY - startY;
            surface.style.transform = `translate(${translateX}px, ${translateY}px)`;
        };

        const onEnd = () => { isDragging = false; };

        const vp = document.getElementById('viewport');
        vp.addEventListener('mousedown', onStart);
        vp.addEventListener('touchstart', onStart);
        window.addEventListener('mousemove', onMove);
        window.addEventListener('touchmove', onMove, { passive: false });
        window.addEventListener('mouseup', onEnd);
        window.addEventListener('touchend', onEnd);
    </script>
</body>
</html>
